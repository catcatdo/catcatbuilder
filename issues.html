<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>이슈 허브 | lilhwang.com</title>
  <meta name="description" content="커뮤니티 이슈를 카드 UI로 탐색하고 상태/라벨로 빠르게 필터링하는 이슈 허브">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://lilhwang.com/issues.html">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #eef4f8;
      --surface: #ffffff;
      --line: #d6e3ea;
      --text: #0f1720;
      --muted: #56707f;
      --brand: #0f6fbb;
      --brand-soft: #e4f1fb;
      --accent: #0f9d81;
      --accent-soft: #dcf8f1;
      --chip: #f4f8fb;
      --max: 1120px;
      --radius: 16px;
      --shadow: 0 14px 30px rgba(13, 38, 56, 0.08);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      color: var(--text);
      font-family: "Space Grotesk", "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      background:
        radial-gradient(circle at 88% 8%, rgba(15, 111, 187, 0.15), transparent 40%),
        radial-gradient(circle at 8% 94%, rgba(15, 157, 129, 0.12), transparent 38%),
        var(--bg);
      line-height: 1.5;
    }

    a { color: inherit; }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 22px 16px 72px;
    }

    .nav-shell {
      position: sticky;
      top: 10px;
      z-index: 40;
      margin-bottom: 14px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      padding: 10px;
    }

    .nav {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .nav a {
      text-decoration: none;
      border: 1px solid var(--line);
      background: #f8fbfd;
      border-radius: 999px;
      font-size: 0.88rem;
      font-weight: 600;
      padding: 7px 12px;
      transition: 0.2s ease;
    }

    .nav a:hover {
      border-color: #9bc4e4;
      color: #0b5e9e;
      background: var(--brand-soft);
    }

    .nav a.active {
      border-color: #87b7dd;
      color: #0b5e9e;
      background: var(--brand-soft);
    }

    .hero {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(135deg, #f7fcff 0%, #ffffff 100%);
      box-shadow: var(--shadow);
      padding: clamp(20px, 3vw, 30px);
      margin-bottom: 14px;
    }

    .hero h1 {
      margin: 0;
      font-size: clamp(1.7rem, 3.8vw, 2.6rem);
      letter-spacing: -0.02em;
    }

    .hero p {
      margin: 10px 0 0;
      color: var(--muted);
      max-width: 760px;
      font-size: 0.95rem;
    }

    .toolbar {
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: var(--surface);
      box-shadow: var(--shadow);
      margin-bottom: 14px;
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    .toolbar-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 0.86rem;
      color: var(--muted);
    }

    .toolbar-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      border: 1px solid var(--line);
      border-radius: 999px;
      background: var(--chip);
      color: #214252;
      font: inherit;
      font-size: 0.82rem;
      padding: 6px 12px;
      cursor: pointer;
      transition: 0.18s ease;
    }

    .chip:hover {
      border-color: #a9ccd5;
      background: #ebf6f8;
    }

    .chip.active {
      border-color: #82c8b9;
      background: var(--accent-soft);
      color: #0a6f59;
      font-weight: 600;
    }

    .label-filter {
      border: 1px solid var(--line);
      border-radius: 10px;
      background: #fff;
      color: #224455;
      font: inherit;
      font-size: 0.84rem;
      padding: 8px 10px;
      min-width: 210px;
    }

    .issues-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .issue-card {
      border: 1px solid var(--line);
      border-radius: 14px;
      background: var(--surface);
      box-shadow: var(--shadow);
      padding: 14px;
      display: grid;
      gap: 10px;
    }

    .issue-meta {
      color: var(--muted);
      font-size: 0.8rem;
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
    }

    .status-badge {
      border-radius: 999px;
      font-size: 0.73rem;
      padding: 3px 8px;
      border: 1px solid #c7deea;
      background: #f2f9fd;
      color: #1d5672;
      font-weight: 600;
    }

    .status-badge.closed {
      border-color: #c9d5dd;
      background: #f1f4f6;
      color: #4f6572;
    }

    .issue-title {
      margin: 0;
      font-size: 1.05rem;
      letter-spacing: -0.01em;
      line-height: 1.35;
    }

    .issue-title a {
      text-decoration: none;
      transition: 0.2s ease;
    }

    .issue-title a:hover {
      color: var(--brand);
    }

    .issue-excerpt {
      margin: 0;
      color: #314956;
      font-size: 0.9rem;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .issue-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tag {
      border-radius: 999px;
      border: 1px solid #c7deea;
      background: #f2f9fd;
      color: #1d5672;
      font-size: 0.74rem;
      padding: 3px 8px;
      text-decoration: none;
      cursor: pointer;
    }

    .empty {
      border: 1px dashed #b8d0dc;
      border-radius: var(--radius);
      padding: 24px;
      text-align: center;
      background: #f8fcff;
      color: var(--muted);
    }

    @media (min-width: 760px) {
      .issues-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (min-width: 1100px) {
      .issues-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 560px) {
      .nav-shell {
        top: 6px;
      }

      .toolbar-head {
        align-items: flex-start;
        flex-direction: column;
      }

      .label-filter {
        min-width: 0;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <main class="wrap">
    <header class="nav-shell">
      <nav class="nav" aria-label="주요 메뉴">
        <a href="index.html">홈</a>
        <a href="issues.html" class="active" aria-current="page">이슈</a>
        <a href="blog.html">블로그</a>
        <a href="developer-tools.html">도구</a>
      </nav>
    </header>

    <section class="hero">
      <h1>이슈 허브</h1>
      <p>핫 이슈를 카드 형태로 확인하고, 상태(열림/닫힘)와 라벨로 원하는 주제만 빠르게 필터링하세요.</p>
    </section>

    <section class="toolbar" aria-label="이슈 필터">
      <div class="toolbar-head">
        <span>상태 및 라벨 필터</span>
        <strong id="resultCount">0개 이슈</strong>
      </div>
      <div class="toolbar-row">
        <div class="chips" id="statusChips"></div>
        <select id="labelFilter" class="label-filter" aria-label="라벨 필터"></select>
      </div>
    </section>

    <section class="issues-grid" id="issuesGrid" aria-live="polite"></section>
  </main>

  <script src="issues-data.v20260214f.js"></script>
  <script>
    const state = {
      issues: [],
      filtered: [],
      activeStatus: "ALL",
      activeLabel: "ALL",
      labelCounts: new Map()
    };

    const issuesGrid = document.getElementById("issuesGrid");
    const statusChips = document.getElementById("statusChips");
    const labelFilter = document.getElementById("labelFilter");
    const resultCount = document.getElementById("resultCount");

    function escapeHtml(value) {
      return String(value || "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#39;");
    }

    function formatDate(raw) {
      if (!raw) return "생성일 미상";
      const date = new Date(raw);
      if (Number.isNaN(date.getTime())) return raw;
      return new Intl.DateTimeFormat("ko-KR", {
        year: "numeric",
        month: "short",
        day: "numeric"
      }).format(date);
    }

    function resolveStatus(issue) {
      const stateRaw = String(
        issue.status || issue.state || (issue.is_closed ? "closed" : "") || (issue.closed_at ? "closed" : "")
      )
        .trim()
        .toLowerCase();

      if (["closed", "close", "done", "resolved"].includes(stateRaw)) {
        return "CLOSED";
      }
      return "OPEN";
    }

    function resolveIssueUrl(issue) {
      if (typeof issue.url === "string" && issue.url.trim()) return issue.url.trim();
      if (typeof issue.link === "string" && issue.link.trim()) return issue.link.trim();
      if (typeof issue.slug === "string" && issue.slug.trim()) {
        return issue.slug.endsWith(".html") ? issue.slug : `${issue.slug}.html`;
      }
      if (typeof issue.id === "string" && issue.id.trim()) {
        const id = issue.id.trim();
        return `issues/${id}.html`;
      }
      return "#";
    }

    function resolveExcerpt(issue) {
      const text = String(issue.rewritten_body || issue.excerpt || "").replace(/\s+/g, " ").trim();
      if (!text) return "요약이 아직 준비되지 않았습니다.";
      return text;
    }

    function normalizeIssues(rawList) {
      return (Array.isArray(rawList) ? rawList : [])
        .filter((issue) => issue && (issue.catchy_title || issue.title))
        .map((issue) => ({
          ...issue,
          _status: resolveStatus(issue),
          _tags: Array.isArray(issue.tags)
            ? issue.tags.map((tag) => String(tag || "").trim()).filter(Boolean)
            : []
        }))
        .sort((a, b) => {
          const at = Date.parse(a.published_at || "") || 0;
          const bt = Date.parse(b.published_at || "") || 0;
          return bt - at;
        });
    }

    function collectLabelCounts(issues) {
      const counts = new Map();
      issues.forEach((issue) => {
        issue._tags.forEach((tag) => {
          counts.set(tag, (counts.get(tag) || 0) + 1);
        });
      });
      return counts;
    }

    function renderStatusChips() {
      const openCount = state.issues.filter((issue) => issue._status === "OPEN").length;
      const closedCount = state.issues.filter((issue) => issue._status === "CLOSED").length;
      const chips = [
        { key: "ALL", label: `전체 (${state.issues.length})` },
        { key: "OPEN", label: `열림 (${openCount})` },
        { key: "CLOSED", label: `닫힘 (${closedCount})` }
      ];

      statusChips.innerHTML = chips
        .map((chip) => {
          const active = chip.key === state.activeStatus ? "active" : "";
          return `<button class="chip ${active}" type="button" data-status="${chip.key}">${chip.label}</button>`;
        })
        .join("");

      statusChips.querySelectorAll(".chip").forEach((button) => {
        button.addEventListener("click", () => {
          state.activeStatus = button.dataset.status || "ALL";
          applyFilter();
        });
      });
    }

    function renderLabelFilter() {
      const options = Array.from(state.labelCounts.entries())
        .sort((a, b) => {
          if (b[1] !== a[1]) return b[1] - a[1];
          return a[0].localeCompare(b[0], "ko");
        })
        .slice(0, 40);

      labelFilter.innerHTML = [
        `<option value="ALL">라벨 전체 (${state.issues.length})</option>`,
        ...options.map(([label, count]) => `<option value="${escapeHtml(label)}">${escapeHtml(label)} (${count})</option>`)
      ].join("");

      labelFilter.value = state.activeLabel;
      labelFilter.addEventListener("change", () => {
        state.activeLabel = labelFilter.value || "ALL";
        applyFilter();
      });
    }

    function renderIssues() {
      resultCount.textContent = `${state.filtered.length}개 이슈`;

      if (!state.filtered.length) {
        issuesGrid.innerHTML = '<article class="empty">선택한 조건에 맞는 이슈가 없습니다.</article>';
        return;
      }

      issuesGrid.innerHTML = state.filtered
        .map((issue) => {
          const title = issue.catchy_title || issue.title || "제목 없음";
          const excerpt = resolveExcerpt(issue);
          const issueUrl = resolveIssueUrl(issue);
          const commentsCount = Array.isArray(issue.comments) ? issue.comments.length : 0;
          const statusClass = issue._status === "CLOSED" ? "closed" : "";
          const statusLabel = issue._status === "CLOSED" ? "닫힘" : "열림";
          const tags = issue._tags.slice(0, 5);
          const source = String(issue.source_name || "출처 미상");

          return `
            <article class="issue-card">
              <div class="issue-meta">
                <span class="status-badge ${statusClass}">${statusLabel}</span>
                <span>생성일: ${escapeHtml(formatDate(issue.published_at))}</span>
                <span>댓글 ${commentsCount}개</span>
              </div>
              <h2 class="issue-title"><a href="${escapeHtml(issueUrl)}">${escapeHtml(title)}</a></h2>
              <p class="issue-excerpt">${escapeHtml(excerpt)}</p>
              <div class="issue-meta"><span>출처: ${escapeHtml(source)}</span></div>
              <div class="issue-tags">
                ${tags.map((tag) => `<button class="tag" type="button" data-tag="${escapeHtml(tag)}">#${escapeHtml(tag)}</button>`).join("")}
              </div>
            </article>
          `;
        })
        .join("");

      issuesGrid.querySelectorAll(".tag").forEach((button) => {
        button.addEventListener("click", () => {
          state.activeLabel = button.dataset.tag || "ALL";
          labelFilter.value = state.activeLabel;
          applyFilter();
          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      });
    }

    function applyFilter() {
      state.filtered = state.issues.filter((issue) => {
        const statusOk = state.activeStatus === "ALL" || issue._status === state.activeStatus;
        const labelOk = state.activeLabel === "ALL" || issue._tags.includes(state.activeLabel);
        return statusOk && labelOk;
      });
      renderStatusChips();
      renderIssues();
    }

    function init() {
      state.issues = normalizeIssues(window.ISSUE_THREADS || []);
      state.labelCounts = collectLabelCounts(state.issues);
      renderStatusChips();
      renderLabelFilter();
      applyFilter();
    }

    init();
  </script>
</body>
</html>
